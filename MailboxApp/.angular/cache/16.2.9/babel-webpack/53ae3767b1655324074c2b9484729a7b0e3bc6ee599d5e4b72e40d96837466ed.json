{"ast":null,"code":"import _asyncToGenerator from \"D:/MailBox/FrontEnd/MailBox/MailboxApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as signalR from '@microsoft/signalr';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/common/signalr.service\";\nimport * as i2 from \"src/app/common/user-context.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"./inbox/inbox.component\";\nimport * as i7 from \"./sentbox/sentbox.component\";\nconst _c0 = function () {\n  return [\"/app-user-management\"];\n};\nfunction HomeComponent_li_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 6)(1, \"a\", 40);\n    i0.ɵɵtext(2, \"Go to User Management\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nexport class HomeComponent {\n  constructor(signalRService, userContextService) {\n    this.signalRService = signalRService;\n    this.userContextService = userContextService;\n    this.message = {};\n    this.userAcesse = false;\n    //SignalR\n    this.hubConnection = new signalR.HubConnectionBuilder().withUrl('http://localhost:5261/mailHub', {\n      skipNegotiation: true,\n      transport: signalR.HttpTransportType.WebSockets\n    }).build();\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.userAcesse = _this.userContextService.user$._value.userRole == \"Admin\" ? true : false;\n      _this.message.Toemail = '';\n      _this.message.Subject = '';\n      _this.message.mailbody = '';\n      // Call the API service function when the app component initializes\n      try {\n        yield _this.startSignalRConnection();\n        _this.signalRService.openNewPage();\n        console.log(\"openNewPage is called\");\n      } catch (error) {\n        console.error('Error starting SignalR connection:', error);\n        // Handle connection startup errors here\n      }\n    })();\n  }\n\n  startSignalRConnection() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (_this2.hubConnection.state === 'Disconnected') {\n        yield _this2.hubConnection.start().then(() => {\n          console.log('SignalR connection started successfully.');\n          // Implement any logic you need after a successful connection\n        }).catch(error => {\n          console.error('Error starting SignalR connection:', error);\n          throw error; // Propagate the error\n        });\n      } else {\n        console.warn('SignalR connection is already in a connected or connecting state.');\n      }\n    })();\n  }\n  unloadNotification($event) {\n    this.signalRService.leavePage();\n    console.log(\"page is closed\");\n  }\n  Send() {\n    this.signalRService.sendPrivateMail(this.message.Toemail, this.message.Subject, this.message.mailbody, \"New\", \"0\");\n  }\n  Logut() {\n    this.signalRService.logOut();\n  }\n  static #_ = this.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.SignalrService), i0.ɵɵdirectiveInject(i2.UserContextService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    hostBindings: function HomeComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"beforeunload\", function HomeComponent_beforeunload_HostBindingHandler($event) {\n          return ctx.unloadNotification($event);\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    decls: 62,\n    vars: 4,\n    consts: [[1, \"container-fluid\"], [1, \"w-100\", \"d-flex\"], [1, \"left-side\", \"flex-column\", \"p-3\", \"bg-light\"], [\"type\", \"button\", \"data-toggle\", \"modal\", \"data-target\", \"#EmailCompose\", 1, \"btn\", \"btn-primary\", \"btn-sm\", \"mb-3\"], [1, \"d-flex\", \"w-100\", \"justify-content-between\", \"p-2\"], [1, \"nav\", \"nav-tabs\", \"flex-column\", \"w-100\"], [1, \"nav-item\"], [\"data-toggle\", \"tab\", \"href\", \"#inbox\", 1, \"nav-link\", \"w-100\", \"d-flex\", \"justify-content-between\"], [1, \"text-dark\", \"d-flex\", \"align-items-center\"], [1, \"far\", \"fa-envelope\", \"pr-2\"], [1, \"count\"], [\"data-toggle\", \"tab\", \"href\", \"#sent\", 1, \"nav-link\"], [\"class\", \"nav-item\", 4, \"ngIf\"], [1, \"nav-link\", 3, \"click\"], [1, \"right-side\", \"p-3\"], [1, \"input-group\", \"mb-3\"], [1, \"input-group-prepend\"], [1, \"input-group-text\"], [1, \"fas\", \"fa-search\"], [\"type\", \"text\", \"placeholder\", \"Search email\", 1, \"form-control\"], [1, \"m-0\"], [1, \"tab-content\"], [\"id\", \"inbox\", 1, \"tab-pane\", \"fade\", \"in\", \"active\"], [\"id\", \"sent\", 1, \"tab-pane\", \"fade\"], [\"id\", \"EmailCompose\", \"tabindex\", \"-1\", \"aria-labelledby\", \"exampleModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"exampleModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"close\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\"], [\"action\", \"mailto:recipient@example.com\", \"method\", \"post\", \"enctype\", \"text/plain\"], [\"for\", \"subject\"], [\"type\", \"text\", \"id\", \"subject\", \"name\", \"subject\", \"placeholder\", \"To: ayz@gmail.com\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [\"type\", \"text\", \"id\", \"subject\", \"name\", \"subject\", \"placeholder\", \"Title...\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [\"for\", \"body\"], [\"id\", \"body\", \"name\", \"body\", \"rows\", \"6\", \"placeholder\", \"Write your message here\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [1, \"text-center\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"nav-link\", 3, \"routerLink\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"button\", 3);\n        i0.ɵɵtext(4, \"Compose\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"ul\", 5)(7, \"li\", 6)(8, \"a\", 7)(9, \"div\", 8)(10, \"span\");\n        i0.ɵɵelement(11, \"i\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"span\");\n        i0.ɵɵtext(13, \"Inbox\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 10);\n        i0.ɵɵtext(15, \"3\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(16, \"li\", 6)(17, \"a\", 11)(18, \"div\", 8)(19, \"span\");\n        i0.ɵɵelement(20, \"i\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"span\");\n        i0.ɵɵtext(22, \"Sent\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(23, HomeComponent_li_23_Template, 3, 2, \"li\", 12);\n        i0.ɵɵelementStart(24, \"li\", 6)(25, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_25_listener() {\n          return ctx.Logut();\n        });\n        i0.ɵɵtext(26, \"Logout\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(27, \"div\", 14)(28, \"div\", 15)(29, \"div\", 16)(30, \"span\", 17);\n        i0.ɵɵelement(31, \"i\", 18);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(32, \"input\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"hr\", 20);\n        i0.ɵɵelementStart(34, \"div\", 21)(35, \"div\", 22);\n        i0.ɵɵelement(36, \"app-inbox\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 23);\n        i0.ɵɵelement(38, \"app-sentbox\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(39, \"div\", 24)(40, \"div\", 25)(41, \"div\", 26)(42, \"div\", 27)(43, \"h5\", 28);\n        i0.ɵɵtext(44, \"New Mail\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"button\", 29)(46, \"span\", 30);\n        i0.ɵɵtext(47, \"\\u00D7\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(48, \"div\", 31)(49, \"form\", 32)(50, \"label\", 33);\n        i0.ɵɵtext(51, \"To:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"input\", 34);\n        i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_52_listener($event) {\n          return ctx.message.Toemail = $event;\n        })(\"keyup.enter\", function HomeComponent_Template_input_keyup_enter_52_listener() {\n          return ctx.Send();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"label\", 33);\n        i0.ɵɵtext(54, \"Subject:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"input\", 35);\n        i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_55_listener($event) {\n          return ctx.message.Subject = $event;\n        })(\"keyup.enter\", function HomeComponent_Template_input_keyup_enter_55_listener() {\n          return ctx.Send();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(56, \"label\", 36);\n        i0.ɵɵtext(57, \"Message:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(58, \"textarea\", 37);\n        i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_textarea_ngModelChange_58_listener($event) {\n          return ctx.message.mailbody = $event;\n        })(\"keyup.enter\", function HomeComponent_Template_textarea_keyup_enter_58_listener() {\n          return ctx.Send();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(59, \"div\", 38)(60, \"button\", 39);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_60_listener() {\n          return ctx.Send();\n        });\n        i0.ɵɵtext(61, \"Send\");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(23);\n        i0.ɵɵproperty(\"ngIf\", ctx.userAcesse);\n        i0.ɵɵadvance(29);\n        i0.ɵɵproperty(\"ngModel\", ctx.message.Toemail);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.message.Subject);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.message.mailbody);\n      }\n    },\n    dependencies: [i3.NgIf, i4.RouterLink, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm, i6.InboxComponent, i7.SentboxComponent],\n    styles: [\".left-side[_ngcontent-%COMP%] {\\n  height: 100vh;\\n  border-right: 1px solid lightgray;\\n  width: 20%;\\n}\\n.left-side[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n.left-side[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  text-decoration: none;\\n}\\n.left-side[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  font-family: \\\"fangsong\\\";\\n}\\n.left-side[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%] {\\n  background-color: #9ea0a3;\\n  border-radius: 50%;\\n  width: 25px;\\n  height: 25px;\\n  display: flex;\\n  justify-content: center;\\n  font-family: \\\"circular\\\";\\n  color: gray;\\n}\\n\\n.right-side[_ngcontent-%COMP%] {\\n  width: 80%;\\n}\\n.right-side[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  border-radius: 0px !important;\\n  border: 0px !important;\\n}\\n.right-side[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus {\\n  box-shadow: 0px !important;\\n  outline: none !important;\\n}\\n.right-side[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%] {\\n  background-color: transparent !important;\\n  border: 0px !important;\\n}\\n\\n.button-text[_ngcontent-%COMP%] {\\n  font-family: \\\"Inter\\\";\\n  font-style: normal;\\n  font-weight: 700;\\n  font-size: 24px;\\n  line-height: 29px;\\n  color: #ffffff;\\n}\\n\\n.btn_submit[_ngcontent-%COMP%] {\\n  background: #2b6282;\\n  border-radius: 10px;\\n  width: 100%;\\n}\\n\\n.modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active {\\n  border: 0px !important;\\n  width: 100%;\\n}\\n.modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n  width: 100%;\\n  border: 0px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZGFzaGJvYXJkL2hvbWUvaG9tZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7RUFDQSxpQ0FBQTtFQUNBLFVBQUE7QUFDSjtBQUNJO0VBQ0UsV0FBQTtBQUNOO0FBRUk7RUFDRSxxQkFBQTtBQUFOO0FBR0k7RUFDRSxlQUFBO0VBQ0EsdUJBQUE7QUFETjtBQUlJO0VBQ0UseUJBQUE7RUFDQSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0VBQ0EsdUJBQUE7RUFDQSxXQUFBO0FBRk47O0FBTUU7RUFDRSxVQUFBO0FBSEo7QUFNTTtFQUNFLDZCQUFBO0VBQ0Esc0JBQUE7QUFKUjtBQU1RO0VBQ0UsMEJBQUE7RUFDQSx3QkFBQTtBQUpWO0FBT007RUFDRSx3Q0FBQTtFQUNBLHNCQUFBO0FBTFI7O0FBU0U7RUFDRSxvQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxjQUFBO0FBTko7O0FBUUU7RUFDRSxtQkFBQTtFQUNBLG1CQUFBO0VBQ0EsV0FBQTtBQUxKOztBQVNJOztFQUVFLHNCQUFBO0VBQ0EsV0FBQTtBQU5OO0FBU0k7RUFDRSxXQUFBO0VBQ0EsV0FBQTtBQVBOIiwic291cmNlc0NvbnRlbnQiOlsiLmxlZnQtc2lkZSB7XHJcbiAgICBoZWlnaHQ6IDEwMHZoO1xyXG4gICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgbGlnaHRncmF5O1xyXG4gICAgd2lkdGg6IDIwJTtcclxuICBcclxuICAgIGJ1dHRvbiB7XHJcbiAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgYSB7XHJcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICAgIH1cclxuICBcclxuICAgIHNwYW4ge1xyXG4gICAgICBmb250LXNpemU6IDE4cHg7XHJcbiAgICAgIGZvbnQtZmFtaWx5OiAnZmFuZ3NvbmcnO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLmNvdW50IHtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzllYTBhMztcclxuICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgICB3aWR0aDogMjVweDtcclxuICAgICAgaGVpZ2h0OiAyNXB4O1xyXG4gICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgICAgZm9udC1mYW1pbHk6ICdjaXJjdWxhcic7XHJcbiAgICAgIGNvbG9yOiBncmF5O1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAucmlnaHQtc2lkZSB7XHJcbiAgICB3aWR0aDogODAlO1xyXG4gIFxyXG4gICAgLmlucHV0LWdyb3VwIHtcclxuICAgICAgaW5wdXQge1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDBweCAhaW1wb3J0YW50O1xyXG4gICAgICAgIGJvcmRlcjogMHB4ICFpbXBvcnRhbnQ7XHJcbiAgXHJcbiAgICAgICAgOmZvY3VzIHtcclxuICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAuaW5wdXQtZ3JvdXAtdGV4dCB7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcclxuICAgICAgICBib3JkZXI6IDBweCAhaW1wb3J0YW50O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC5idXR0b24tdGV4dCB7XHJcbiAgICBmb250LWZhbWlseTogXCJJbnRlclwiO1xyXG4gICAgZm9udC1zdHlsZTogbm9ybWFsO1xyXG4gICAgZm9udC13ZWlnaHQ6IDcwMDtcclxuICAgIGZvbnQtc2l6ZTogMjRweDtcclxuICAgIGxpbmUtaGVpZ2h0OiAyOXB4O1xyXG4gICAgY29sb3I6ICNmZmZmZmY7XHJcbiAgfVxyXG4gIC5idG5fc3VibWl0IHtcclxuICAgIGJhY2tncm91bmQ6ICMyYjYyODI7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgfVxyXG4gIC5tb2RhbCB7XHJcbiAgXHJcbiAgICBpbnB1dCxcclxuICAgIGlucHV0OmFjdGl2ZSB7XHJcbiAgICAgIGJvcmRlcjogMHB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgdGV4dGFyZWEge1xyXG4gICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgYm9yZGVyOiAwcHg7XHJcbiAgICB9XHJcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["signalR","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ɵɵpureFunction0","_c0","HomeComponent","constructor","signalRService","userContextService","message","userAcesse","hubConnection","HubConnectionBuilder","withUrl","skipNegotiation","transport","HttpTransportType","WebSockets","build","ngOnInit","_this","_asyncToGenerator","user$","_value","userRole","Toemail","Subject","mailbody","startSignalRConnection","openNewPage","console","log","error","_this2","state","start","then","catch","warn","unloadNotification","$event","leavePage","Send","sendPrivateMail","Logut","logOut","_","ɵɵdirectiveInject","i1","SignalrService","i2","UserContextService","_2","selectors","hostBindings","HomeComponent_HostBindings","rf","ctx","ɵɵresolveWindow","ɵɵelement","ɵɵtemplate","HomeComponent_li_23_Template","ɵɵlistener","HomeComponent_Template_button_click_25_listener","HomeComponent_Template_input_ngModelChange_52_listener","HomeComponent_Template_input_keyup_enter_52_listener","HomeComponent_Template_input_ngModelChange_55_listener","HomeComponent_Template_input_keyup_enter_55_listener","HomeComponent_Template_textarea_ngModelChange_58_listener","HomeComponent_Template_textarea_keyup_enter_58_listener","HomeComponent_Template_button_click_60_listener"],"sources":["D:\\MailBox\\FrontEnd\\MailBox\\MailboxApp\\src\\app\\dashboard\\home\\home.component.ts","D:\\MailBox\\FrontEnd\\MailBox\\MailboxApp\\src\\app\\dashboard\\home\\home.component.html"],"sourcesContent":["import { Component, HostListener } from '@angular/core';\nimport * as signalR from '@microsoft/signalr';\nimport { SignalrService } from 'src/app/common/signalr.service';\nimport { UserContextService } from 'src/app/common/user-context.service';\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent {\n  message:any ={};\n  userAcesse:boolean = false;\n  private hubConnection: signalR.HubConnection;\n  constructor(private signalRService: SignalrService,private userContextService: UserContextService){\n   \n     //SignalR\n     this.hubConnection = new signalR.HubConnectionBuilder()\n     .withUrl('http://localhost:5261/mailHub', {\n       skipNegotiation: true,\n       transport: signalR.HttpTransportType.WebSockets\n     })\n     .build();\n  }\n  async ngOnInit(): Promise<void> {\n    this.userAcesse = this.userContextService.user$._value.userRole ==\"Admin\"?true:false;\n    this.message.Toemail = '';\n    this.message.Subject = '';\n    this.message.mailbody = '';\n    // Call the API service function when the app component initializes\n    try {\n      await this.startSignalRConnection();\n      this.signalRService.openNewPage();\n      console.log(\"openNewPage is called\");\n    } catch (error) {\n      console.error('Error starting SignalR connection:', error);\n      // Handle connection startup errors here\n    }\n  }\n  async startSignalRConnection(): Promise<void> {\n    if (this.hubConnection.state === 'Disconnected') {\n      await this.hubConnection\n        .start()\n        .then(() => {\n          console.log('SignalR connection started successfully.');\n          // Implement any logic you need after a successful connection\n        })\n        .catch((error) => {\n          console.error('Error starting SignalR connection:', error);\n          throw error; // Propagate the error\n        });\n    } else {\n      console.warn('SignalR connection is already in a connected or connecting state.');\n    }\n  }\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any): void {\n    this.signalRService.leavePage();\n    console.log(\"page is closed\");\n  }\n  Send(){\n    this.signalRService.sendPrivateMail(this.message.Toemail, this.message.Subject,this.message.mailbody , \"New\",\"0\")\n  }\n\n  Logut(){\n    this.signalRService.logOut();\n  }\n}\n","<div class=\"container-fluid\">\n  <div class=\"w-100 d-flex\">\n    <!-- Left-side panel -->\n    <div class=\"left-side flex-column p-3 bg-light\">\n      <button type=\"button\" class=\"btn btn-primary btn-sm mb-3\" data-toggle=\"modal\" data-target=\"#EmailCompose\">Compose</button>\n      <div class=\"d-flex w-100 justify-content-between p-2\">\n        <ul class=\"nav nav-tabs flex-column w-100\">\n          <li class=\"nav-item\">\n            <a data-toggle=\"tab\" class=\"nav-link w-100 d-flex justify-content-between\" href=\"#inbox\">\n              <div class=\"text-dark d-flex align-items-center\">\n                <span><i class=\"far fa-envelope pr-2\"></i></span>\n                <span>Inbox</span>\n              </div>\n              <div class=\"count\">3</div>\n            </a>\n          </li>\n          <li class=\"nav-item\">\n            <a data-toggle=\"tab\" class=\"nav-link\" href=\"#sent\">\n              <div class=\"text-dark d-flex align-items-center\">\n                <span><i class=\"far fa-envelope pr-2\"></i></span>\n                <span>Sent</span>\n              </div>\n            </a>\n          </li>\n          <li *ngIf=\"userAcesse\" class=\"nav-item\">\n            <a [routerLink]=\"['/app-user-management']\" class=\"nav-link\">Go to User Management</a>\n          </li>\n          <li class=\"nav-item\">\n            <button class=\"btn btn-danger\" (click)=\"Logut()\" class=\"nav-link\">Logout</button>\n          </li>\n        </ul>\n      </div>\n    </div>\n  \n    <!-- Right-side content area -->\n    <div class=\"right-side p-3\">\n      <div class=\"input-group mb-3\">\n        <div class=\"input-group-prepend\">\n          <span class=\"input-group-text\"><i class=\"fas fa-search\"></i></span>\n        </div>\n        <input type=\"text\" class=\"form-control\" placeholder=\"Search email\">\n      </div>\n      <hr class=\"m-0\">\n      <div class=\"tab-content\">\n        <div id=\"inbox\" class=\"tab-pane fade in active\">\n          <app-inbox></app-inbox>\n        </div>\n        <div id=\"sent\" class=\"tab-pane fade\">\n          <app-sentbox></app-sentbox>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Email Compose Modal -->\n<div class=\"modal fade\" id=\"EmailCompose\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">New Mail</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <form action=\"mailto:recipient@example.com\" method=\"post\" enctype=\"text/plain\">\n          <label for=\"subject\">To:</label>\n          <input type=\"text\" id=\"subject\" name=\"subject\" class=\"form-control mb-3\" placeholder=\"To: ayz@gmail.com\" [(ngModel)]=\"message.Toemail\" (keyup.enter)=\"Send()\">\n          <label for=\"subject\">Subject:</label>\n          <input type=\"text\" id=\"subject\" name=\"subject\" class=\"form-control mb-3\" placeholder=\"Title...\" [(ngModel)]=\"message.Subject\" (keyup.enter)=\"Send()\">\n          <label for=\"body\">Message:</label>\n          <textarea id=\"body\" name=\"body\" rows=\"6\" class=\"form-control mb-3\" placeholder=\"Write your message here\" [(ngModel)]=\"message.mailbody\" (keyup.enter)=\"Send()\"></textarea>\n          <div class=\"text-center\">\n            <button type=\"button\" class=\"btn btn-primary\" (click)=\"Send()\" data-dismiss=\"modal\">Send</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}